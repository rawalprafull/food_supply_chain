<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>BLOCKCHAIN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="./SupplychainUI/js/qrcode.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
  <script src="https://unpkg.com/ng-table@3.0.1/bundles/ng-table.min.js"></script>
  <script src="./SupplychainUI/js/manage_html_view.js"></script>
  <link href="./SupplychainUI/css/bootstrap-3.3.7.css" rel="stylesheet" type="text/css">
  <link href="./SupplychainUI/css/style.css" rel="stylesheet">
  <link rel="stylesheet" ; href="https://unpkg.com/ng-table@3.0.1/bundles/ng-table.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
    crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<body ng-app="application" ng-controller="appController">

  <!--loader icon -->
  <div id="cover-spin"></div>

  <div class="container-fluid">

    <!-- Header Section starts here-->
    <header class="header_bg">
      <div class="header_left"></div>
      <div class="header_right"></div>
      <div class="container">
        <div class="logo_pharma">
          <a href="#"><img src="images/logo.png" alt="logo" /></a>
        </div>


        <div class="banner_text_right"> Blockchain for Business<br>
          <b>WITH IBM BLOCKCHAIN</b> </div>
      </div>

    </header>
    <!-- Header Section ends here-->

    <div id="index_view">
      <!-- index_view Section ends here-->
      <div class="student_id_banner">
        <h1>Suppy chain managment</h1>
        <h2>
          <b>Supply chain with Blockchain </b>In the food industry, it's imperative to have solid records to trace each product
          to its source</b>
        </h2>
        <div class="button_set">
          <a href="#" class="agent_btn cms_student_btn" id="alice_login_html">Admin</a>
        </div>
      </div>
      <!-- index_view Section ends here-->
    </div>



    <div id="firstchannelView">
      <div class="wrapper">
        <div class="container">
          <div class="signout">
            <a href="#" id="sign_out"><img src="./SupplychainUI/images/sign_out_btn.png" alt="" title="sign out"></a>
          </div>
        </div>

        <!-- Content Section starts here-->
        <section class="content_area">
          <div class="left_submenu col-md-2">
            <ul>
              <li href="#supplier" onclick="openCity(event, 'firstchannel_supplier')" id="firstchannel_defaultOpen" class="tablinks"><a>Alice (Supplier)</a></li>
              <li href="#distributor-1" onclick="openCity(event, 'firstchannel_distributor')" class="tablinks"><a>Miriam (Distributor)</a></li>
              <li href="#distributor-2" onclick="openCity(event, 'firstchannel_retailer')" class="tablinks"><a>John (Retailer)</a></li>
            </ul>
          </div>

          <div class="dropdown">
            <button class="btn btn-danger dropdown-toggle" type="button" data-toggle="dropdown" style="margin-left: 90%;">&nbsp;  Channels  &nbsp; <span class="caret"></span></button>
            <ul class="dropdown-menu" style="margin-left: 90%;">
              <li><a href="#" id="fromfirst_firstchannel">First Channel</a></li>
              <div class="dropdown-divider"></div>
              <li><a href="#" id="fromfirst_secondchannel">Second Channel</a></li>
            </ul>
          </div>


          <!--Supplier start here-->
          <div class="right_content_block col-md-9 tabcontent" id="firstchannel_supplier">
            <h2>FIRST CHANNEL</h2>
            <div role="tabpanel">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#sup-home1" data-toggle="tab" role="tab" aria-controls="tab1">Create new catch record</a></li>
                <li role="presentation"><a href="#sup-paneTwo1" data-toggle="tab" role="tab" aria-controls="tab2">Send shipment</a></li>
                <li role="presentation"><a href="#sup-paneTwo2" data-toggle="tab" role="tab" aria-controls="tab3">Dashboard</a></li>
              </ul>
              <div id="tabContent1" class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="sup-home1">
                  <div class="info">Please enter the following details for the new catch record</div>
                  <span class="fields_design col-md-6">
                      <label>Enter price</label>
                      <input type="text" placeholder="EX:11$" ng-model="tuna.price" ng-required="true"/>
                      </span> <span class="fields_design col-md-6">
                      <label>Enter name of vessel</label>
                      <input type="text" placeholder="EX:0239L" ng-model="tuna.vessel" ng-required="true"/>
                      </span> <span class="fields_design col-md-6">
                      <label>Enter longitude</label>
                      <input class="nonactive" type="text" value="13.052313"/>
                      </span> <span class="fields_design col-md-6">
                      <label>Enter latitude</label>
                      <input class="nonactive" type="text" value="77.624934"/>
                      </span> <span class="fields_design col-md-6">
                      <label>Please select name Channel</label>
                      <select ng-model="tuna.holder">
                        <option>Select</option>
                        <option selected value="firstchannel+Miriam"> FIRST CHANNEL </option>
                        <option value="secondchannel+Bob"> SECOND CHANNEL </option>                 
                      </select>
                      </span>
                  <div class="clearfix"></div>
                  <div class="submit_block">
                    <input id="createSubmit" type="submit" value="Create" class="submit_btn_cmn" ng-click="addRecord(tuna)">
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="sup-paneTwo1">
                  <div class="info">Send the shipment</div>
                  <span class="fields_design col-md-6">
                      <label>Please select name of distributor</label>
                      </span>
                  <div class="clearfix"></div>
                  <span class="fields_design col-md-6">
                      <select ng-model="ChannelUserPort" id="sentToDist">
                        <option>Select</option>
                        <option selected value="firstchannel+user1+7051"> Miriam </option>
                        <!-- <option value="secondchannel+user1+7051"> Bob </option> -->
                      </select>
                      </span> <span class="fields_design col-md-6">
                      <input id="querySubmit"  type="submit" value="Query" class="submit_btn_cmn" ng-click="queryAllRecord_1(ChannelUserPort)"/>
                      </span>
                  <div class="clearfix"></div>
                  <table width="100%">
                    <tbody>
                      <tr>
                        <th>Catch ID</th>
                        <th>Catch Timestamp</th>
                        <th>Supplier</th>
                        <th>Distributor</th>
                        <th>Status</th>
                        <th>Vessel</th>
                        <th>Catch location (Longitude, Latitude)</th>
                        <th>Action</th>
                      </tr>
                      <tr ng-repeat="query_record in all_record_Alice" ng-if="query_record.distributor.shipmentstatus==' '">
                        <td>{{query_record.Key}}</td>
                        <td>{{query_record.timestamp}}</td>
                        <td>{{query_record.distributor.suppliername}}</td>
                        <td>{{query_record.distributor.DistributorName}}</td>
                        <td>{{query_record.status}}</td>
                        <td>{{query_record.vessel}}</td>
                        <td>{{query_record.location}}</td>
                        <td>
                          <input id="prodId" name="prodId" type="hidden" value="">
                          <span ng-show="query_record.distributor.shipmentstatus=='Sent'" class="badge badge-info">Sent({{query_record.shipmentid}})</span>
                          <input ng-show="query_record.distributor.shipmentstatus==' '" type="checkbox" ng-model="query_record.selected" ng-true-value="'Y'" ng-false-value="'N'">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <div class="clearfix"></div>
                  <div class="submit_block">
                    <input class="submit_btn_cmn" id="sentItem" type="submit" value="Send" ng-click="sentItem({'data':all_record_Alice,'channel':'firstchannel','sendTo':'Distributor','user':'user1'})" onclick="" />
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="sup-paneTwo2">
                  <div class="info">Query all the catch IDs with status</div>
                  <div class="clearfix"></div>
                  <span class="fields_design col-md-6">
                      <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord()"/>
                      </span>
                  <div class="clearfix"></div>
                  <table width="100%" ng-table="tableParams">
                    <tbody>
                      <tr>
                        <th>Catch ID</th>
                        <th>Catch Timestamp</th>
                        <th>Distributor</th>
                        <th>Status</th>
                        <th>Vessel</th>
                        <th>Catch location (Longitude, Latitude)</th>
                        <th>Shipment ID</th>
                        <th>Shipment sent time</th>
                        <th>Shipment received time</th>
                        <th>Shipment status</th>
                      </tr>
                      <tr ng-repeat="record in $data">
                        <td>{{record.Key}} </td>
                        <td>{{record.timestamp}}</td>
                        <td>{{record.distributor.DistributorName}}</td>
                        <td>{{record.status}}</td>
                        <td>{{record.vessel}}</td>
                        <td>{{record.location}}</td>
                        <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record.distributor.shipmentid)" >{{record.distributor.shipmentid}}</a>
                          <span ng-show="record.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                          <span ng-show="record.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                        </td>
                        <td>{{record.distributor.ShipmentSentTimestamp}}</td>
                        <td>{{record.distributor.ShipmentReceiveTimestamp}}</td>
                        <td><span class="badge badge-info">{{record.distributor.shipmentstatus}}</span></td>
                      </tr>
                    </tbody>
                  </table>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>
          <!--Supplier ends here -->


          <!--Distributor-1 start here-->
          <div class="right_content_block col-md-9 tabcontent" id="firstchannel_distributor">
            <h2>FIRST CHANNEL</h2>
            <div role="tabpanel">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active" ><a href="#dist-paneTwo2" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
                <li role="presentation" ><a href="#dist-home2" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
                <li role="presentation" ><a href="#dist-home3" data-toggle="tab" role="tab" aria-controls="tab1">Send shipment</a></li>
              </ul>
              <div id="tabContent1" class="tab-content">
                
                <div role="tabpanel" class="tab-pane fade in active" id="dist-paneTwo2">
                    <div class="info">Query all the catch IDs with shipment status</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                      <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('firstchannel+user2+8051')"/>
                    </span>
                    <div class="clearfix"></div>
                    <table width="100%" ng-table="tableParamsMiriam">
                        <tr>
                          <th>Catch ID</th>
                          <th>Catch Timestamp</th>
                          <th>Supplier</th>
                          <th>Status</th>
                          <th>Vessel</th>
                          <th>Catch location (Longitude, Latitude)</th>
                          <th>Shipment ID</th>
                          <th>Shipment sent time</th>
                          <th>Shipment received time</th>
                          <th>Shipment status</th>
                        </tr>
                        <tbody ng-repeat="record_1 in $data">
                          <tr>
                            <td rowspan="2">{{record_1.Key}}</td>
                            <td rowspan="2">{{record_1.timestamp}}</td>
                            <td rowspan="2">{{record_1.distributor.suppliername}}</td>
                            <td rowspan="2">{{record_1.status}}</td>
                            <td rowspan="2">{{record_1.vessel}}</td>
                            <td rowspan="2">{{record_1.location}}</td>
                            <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record_1.distributor.shipmentid)" >{{record_1.distributor.shipmentid}}</a></td>
                            <td>{{record_1.distributor.ShipmentSentTimestamp}}</td>
                            <td>{{record_1.distributor.ShipmentReceiveTimestamp}}</td>
                            <td>
                              <span ng-show="record_1.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_1.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_1.distributor.shipmentstatus=='Delivered' && record_1.status=='Fresh'" class="badge badge-success">Received </span>
                              <span ng-if="record_1.distributor.shipmentstatus=='Sent' && record_1.status=='New'" class="badge badge-info">Shipment in transit</span>
                            </td>
                          </tr>
                          
                          <tr>
                            <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record_1.retailer.shipmentid)" >{{record_1.retailer.shipmentid}}</a></td>
                            <td>{{record_1.retailer.ShipmentSentTimestamp}}</td>
                            <td>{{record_1.retailer.ShipmentReceiveTimestamp}}</td>
                            <td>
                              <span ng-show="record_1.retailer.FoodStatus=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_1.retailer.FoodStatus=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_1.retailer.shipmentstatus=='Delivered'" class="badge badge-success">Received </span>
                              <span ng-if="record_1.retailer.shipmentstatus=='Sent' && record_1.retailer.status=='Fresh'" class="badge badge-info">Shipment in transit</span>
                            </td>
                          </tr>
                      </tbody>
                    </table>
                    <div class="clearfix"></div>
                </div>
                
                <div role="tabpanel" class="tab-pane fade " id="dist-home2">
                  <div class="info">Receive the shipment</div>
                  <div class="clearfix"></div>
                  <span class="fields_design col-md-6">
                      <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipmentForDistributor('firstchannel+user2+8051')"/>
                      </span>
                  <div class="clearfix"></div>
                  <table width="100%">
                    <tbody>
                      <tr>
                        <th>Shipment ID</th>
                        <th>Supplier</th>
                        <th>Status</th>
                        <th>Shipment sent time</th>
                        <th>Shipment details</th>
                        <th>Action</th>
                      </tr>
                      <tr ng-repeat="query_record_receive in sent_shipment_Miriam">
                        <td>{{query_record_receive.distributor.shipmentid}}</td>
                        <td>{{query_record_receive.distributor.suppliername}}</td>
                        <td>{{query_record_receive.status}}</td>
                        <td>{{query_record_receive.distributor.ShipmentSentTimestamp}}</td>
                        <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#MiriamModal"></td>
                        <td>
                          <button ng-if="query_record_receive.distributor.shipmentstatus=='Sent' && query_record_receive.status=='New'" id="receiveItem" type="submit"
                            value="Received" class="default btn btn-outline-primary" ng-hide="hiddenMiriamReceive" ng-class="{fade: startFadeMiriamReceive}"
                            ng-click="receiveShipmentMiriam(shipment_tuna_Miriam)" onclick=""> Receive <i class="fab fa-get-pocket"></i></button>

                            <input id="confirmShipmentMiriam" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenMiriamConfirm"
                              ng-class="{fade: startFadeMiriamConfirm}" ng-click="changeStatusMiriam(shipment_tuna_Miriam)" onclick="">
                              
                              <span ng-if="query_record.distributor.shipmentstatus=='Delivered' && query_record.status=='Fresh'" class="badge badge-success">Confirmed success </span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <input id="receiveShipmentMiriam" value="firstchannel+user2+8051" hidden>
                  <div class="clearfix"></div>
                  <!--start modal of list  tuna for miriam -->
                  <div class="modal" id="MiriamModal">
                    <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                          <h4 class="modal-title">Shipment details</h4>
                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body">
                          <table id="tuna_shipment_record_Miriam" class="table table-striped table-bordered" style="width:100%" align="center">
                            <thead>
                              <tr>
                                <th>Catch ID</th>
                                <th>Catch Timestamp</th>
                                <th>Supplier</th>
                                <th>Status</th>
                                <th>Vessel</th>
                                <th>Catch Location <br>(Longitude, Latitude)</th>
                                <th>Price</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-repeat="tuna_shipment_record_Miriam in shipment_tuna_Miriam">
                                <!-- ng-if="tuna_shipment_record_Miriam.shipmentstatus=='Sent'"> -->
                                <td>{{tuna_shipment_record_Miriam.Key}}</td>
                                <td>{{tuna_shipment_record_Miriam.timestamp}}</td>
                                <td>{{tuna_shipment_record_Miriam.distributor.suppliername}}</td>
                                <td>{{tuna_shipment_record_Miriam.status}}</td>
                                <td>{{tuna_shipment_record_Miriam.vessel}}</td>
                                <td>{{tuna_shipment_record_Miriam.location}}</td>
                                <td>{{tuna_shipment_record_Miriam.price}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- END modal list of tuna for miriam -->
                </div>

                <div role="tabpanel" class="tab-pane fade" id="dist-home3">
                    <div class="info">Send the shipment</div>
                    <span class="fields_design col-md-6">
                        <label>Please select name of distributor</label>
                        </span>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                        <select ng-model="ChannelUserPort" id="sentToRetailer">
                            <option>Select</option>
                            <option selected value="firstchannel+user2+8051"> John </option>
                            <!-- <option value="secondchannel+user1+7051"> Bob </option> -->
                        </select>
                        </span> <span class="fields_design col-md-6">
                        <input id="querySubmit"  type="submit" value="Query" class="submit_btn_cmn" ng-click="queryAllRecord_1(ChannelUserPort)"/>
                        </span>
                    <div class="clearfix"></div>
                    <table width="100%">
                        <tbody>
                        <tr>
                            <th>Catch ID</th>
                            <th>Catch Timestamp</th>
                            <th>Supplier</th>
                            <th>Distributor</th>
                            <th>Status</th>
                            <th>Vessel</th>
                            <th>Catch location (Longitude, Latitude)</th>
                            <th>Action</th>
                        </tr>
                        <tr ng-repeat="query_record in all_record_Miriam" ng-if="query_record.distributor.shipmentstatus=='Delivered' && query_record.retailer.shipmentstatus==' '">
                            <td>{{query_record.Key}}</td>
                            <td>{{query_record.timestamp}}</td>
                            <td>{{query_record.distributor.suppliername}}</td>
                            <td>{{query_record.distributor.DistributorName}}</td>
                            <td>{{query_record.status}}</td>
                            <td>{{query_record.vessel}}</td>
                            <td>{{query_record.location}}</td>
                            <td>
                            <input id="prodId" name="prodId" type="hidden" value="">
                            <span ng-show="query_record.retailer.shipmentstatus=='Sent'" class="badge badge-info">Sent</span>
                            <input ng-show="query_record.distributor.shipmentstatus=='Delivered' && query_record.retailer.shipmentstatus==' '" type="checkbox" ng-model="query_record.selected" ng-true-value="'Y'" ng-false-value="'N'">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="clearfix"></div>
                    <div class="submit_block">
                        <input class="submit_btn_cmn" id="sentItem" type="submit" value="Send" ng-click="sentItem({'data':all_record_Miriam,'channel':'firstchannel','sendTo':'Retailer','user':'user2'})" onclick="" />
                    </div>
                </div>

              </div>
            </div>
          </div>
          <!--Distributor-1 ends here-->


          <!--Retailer-1 start here-->
          <div class="right_content_block col-md-9 tabcontent" id="firstchannel_retailer">
              <h2>FIRST CHANNEL</h2>
              <div role="tabpanel">
                <ul class="nav nav-tabs" role="tablist">
                  <li role="presentation" class="active"><a href="#retlr-home3" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
                  <li role="presentation"><a href="#retlr-paneTwo3" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
                </ul>
                <div id="tabContent1" class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="retlr-home3">
                    <div class="info">Receive the shipment</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                        <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipmentForRetailer('firstchannel+user4+10051')"/>
                        </span>
                    <div class="clearfix"></div>
                    <table width="100%">
                      <tbody>
                        <tr>
                          <th>Shipment ID</th>
                          <th>Supplier</th>
                          <th>Status</th>
                          <th>Shipment sent time</th>
                          <th>Shipment details</th>
                          <th>Action</th>
                        </tr>
                        <tr ng-repeat="john_query_record_receive in sent_shipment_John" ng-if="john_query_record_receive.retailer.shipmentstatus=='Sent'">
                          <td>{{john_query_record_receive.retailer.shipmentid}}</td>
                          <td>{{john_query_record_receive.retailer.suppliername}}</td>
                          <td>{{john_query_record_receive.status}}</td>
                          <td>{{john_query_record_receive.retailer.ShipmentSentTimestamp}}</td>
                          <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#JohnModal"
                            /></td>
                          <td>
                            <input ng-if="john_query_record_receive.retailer.shipmentstatus=='Sent' && john_query_record_receive.status=='Fresh'" id="receiveItem"
                              type="submit" value="Received" class="default btn btn-outline-primary" ng-hide="hiddenMiriamJohn"
                              ng-class="{fade: startFadeJohnReceive}" ng-click="receiveShipmentJohn(shipment_tuna_John)" onclick="stopIOT()">
      
                              <input id="confirmShipmentJohn" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenJohnConfirm"
                                ng-class="{fade: startFadeJohnConfirm}" ng-click="changeStatusJohn(shipment_tuna_John)" onclick="stopIOT()">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="clearfix"></div>
                    <input id="receiveShipmentJohn" value="firstchannel+user4+10051" hidden>
                    <!--start modal of list  tuna for John -->
                    <div class="modal" id="JohnModal">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
      
                          <!-- Modal Header -->
                          <div class="modal-header">
                            <h4 class="modal-title">Shipment details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
      
                          <!-- Modal body -->
      
                          <div class="modal-body">
                            <table id="tuna_shipment_record_Miriam" class="table table-striped table-bordered" style="width:100%" align="center">
                              <thead>
                                <tr>
                                  <th>Catch ID</th>
                                  <th>Catch Timestamp</th>
                                  <th>Supplier</th>
                                  <th>Supplier</th>
                                  <th>Status</th>
                                  <th>Vessel</th>
                                  <th>Catch Location <br>(Longitude, Latitude)</th>
                                  <th>Price</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="tuna_shipment_record_John in shipment_tuna_John" ng-if="tuna_shipment_record_John.retailer.shipmentstatus=='Sent'">
                                  <td>{{tuna_shipment_record_John.Key}}</td>
                                  <td>{{tuna_shipment_record_John.timestamp}}</td>
                                  <td>{{tuna_shipment_record_John.retailer.suppliername}}</td>
                                  <th>{{tuna_shipment_record_John.retailer.DistributorName}}</th>
                                  <td>{{tuna_shipment_record_John.status}}</td>
                                  <td>{{tuna_shipment_record_John.vessel}}</td>
                                  <td>{{tuna_shipment_record_John.location}}</td>
                                  <td>{{tuna_shipment_record_John.price}}</td>
                                </tr>
                              </tbody>
      
                            </table>
                          </div>
      
                          <!-- Modal footer -->
                          <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- END modal list of tuna for miriam -->
      
                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="retlr-paneTwo3">
                    <div class="info">Query all the catch IDs with shipment status</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                        <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('firstchannel+user4+10051')" />
                        </span>
                    <div class="clearfix"></div>
                    <table width="100%" ng-table="tableParamsJohn">
                      <tbody>
                        <tr>
                          <th>Catch ID</th>
                          <th>Catch Timestamp</th>
                          <th>Supplier</th>
                          <th>Status</th>
                          <th>Vessel</th>
                          <th>Catch location (Longitude, Latitude)</th>
                          <th>Shipment ID</th>
                          <th>Shipment sent time</th>
                          <th>Shipment received time</th>
                          <th>Shipment status</th>
                          <th>QR code</th>
                        </tr>
                        <tr ng-repeat="retlrecord_john in $data" ng-if="retlrecord_john.retailer.shipmentstatus!=' '">
                          <td>{{retlrecord_john.Key}}</td>
                          <td>{{retlrecord_john.timestamp}}</td>
                          <td>{{retlrecord_john.retailer.suppliername}}</td>
                          <td>{{retlrecord_john.retailer.shipmentstatus}}</td>
                          <td>{{retlrecord_john.vessel}}</td>
                          <td>{{retlrecord_john.location}}</td>
                          <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(retlrecord_john.retailer.shipmentid)">{{retlrecord_john.retailer.shipmentid}}</a></td>
                          <td>{{retlrecord_john.retailer.ShipmentSentTimestamp}}</td>
                          <td>{{retlrecord_john.retailer.ShipmentReceiveTimestamp}}</td>
                          <td>
                            <span ng-show="retlrecord_john.retailer.FoodStatus=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="retlrecord_john.retailer.FoodStatus=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-if="retlrecord_john.retailer.FoodStatus=='Fresh' && retlrecord_john.retailer.shipmentstatus == 'Delivered'" class="badge badge-success">Received </span>
                            <span ng-if="retlrecord_john.retailer.shipmentstatus=='Sent' && retlrecord_john.status=='Fresh'" class="badge badge-info">Shipment in transit</span>
                          </td>
                          <td><!-- Button trigger modal -->
                            <button type="button" class="btn" id="{{retlrecord_john.Key}}" title="show QR code" data-toggle="modal" onclick="generateQRCode(this.id);" data-target="#exampleModalCenter"><i class="fas fa-qrcode"></i> </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="clearfix"></div>
                  </div>
                </div>
              </div>
          </div>
      

        </section>
      </div>
    </div>
    <!--Retailer-1 Ends here-->
    <!--firstchannel end here-->

    <!--secondchannel start here-->
    <div id="secondchannelView">
      <div class="wrapper">
        <div class="container">
          <div class="signout">
            <a href="#" id="sign_out_second" ><img src="./SupplychainUI/images/sign_out_btn.png" alt="" title="sign out"></a>
          </div>
        </div>

        <!-- Content Section starts here-->
        <section class="content_area">
          <div class="secondchannel_left_submenu col-md-2">
            <ul>
              <li href="#supplier" onclick="openCity(event, 'secondchannel_supplier')" id="secondchannel_defaultOpen" class="tablinks"><a>Alice (Supplier)</a></li>
              <li href="#distributor-1" onclick="openCity(event, 'secondchannel_distributor')" class="tablinks"><a>Bob (Distributor)</a></li>
              <li href="#distributor-2" onclick="openCity(event, 'secondchannel_retailer')" class="tablinks"><a>Olivia (Retailer)</a></li>
            </ul>
          </div>

          <div class="dropdown">
            <button class="btn btn-danger dropdown-toggle" type="button" data-toggle="dropdown" style="margin-left: 90%;">&nbsp;  Channels  &nbsp; <span class="caret"></span></button>
            <ul class="dropdown-menu" style="margin-left: 90%;">
              <li><a href="#" id="fromsecond_firstchannel">First Channel</a></li>
              <li><a href="#" id="fromsecond_secondchannel">Second Channel</a></li>
            </ul>
          </div>

          <div class="second_channel_right_content_block col-md-9 tabcontent" id="secondchannel_supplier">
            <h2>SECOND CHANNEL</h2>
            <div role="tabpanel">
              <ul class="nav nav-tabs second_channel_nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#AlicetabSecond-1" data-toggle="tab" role="tab" aria-controls="tab1">Create new catch record</a></li>
                <li role="presentation"><a href="#AlicetabSecond-2" data-toggle="tab" role="tab" aria-controls="tab2">Send shipment</a></li>
                <li role="presentation"><a href="#AlicetabSecond-3" data-toggle="tab" role="tab" aria-controls="tab3">Dashboard</a></li>
              </ul>
              <div id="tabContent1" class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="AlicetabSecond-1">
                  <div class="second_channel_info">Please enter the following details for the new catch record</div>
                  <span class="fields_design col-md-6">
                            <label>Enter price</label>
                            <input type="text" placeholder="EX:11$" ng-model="tuna.price" ng-required="true"/>
                            </span> <span class="fields_design col-md-6">
                            <label>Enter name of vessel</label>
                            <input type="text" placeholder="EX:0239L" ng-model="tuna.vessel" ng-required="true"/>
                            </span> <span class="fields_design col-md-6">
                            <label>Enter longitude</label>
                            <input class="nonactive" type="text" value="13.052313"/>
                            </span> <span class="fields_design col-md-6">
                            <label>Enter latitude</label>
                            <input class="nonactive" type="text" value="77.624934"/>
                            </span> <span class="fields_design col-md-6">
                            <label>Please select Channel</label>
                            <select ng-model="tuna.holder">
                              <option>Select</option>
                              <option selected value="firstchannel+Miriam"> FIRST CHANNEL </option>
                              <option value="secondchannel+Bob"> SECOND CHANNEL </option>                 
                            </select>
                            </span>
                  <div class="clearfix"></div>
                  <div class="submit_block">
                    <input id="createSubmit" type="submit" value="Create" class="submit_btn_cmn" ng-click="addRecord(tuna)">
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="AlicetabSecond-2">
                  <div class="second_channel_info">Send the shipment</div>
                    <span class="fields_design col-md-6">
                        <label>Please select name of distributor</label>
                    </span>
                    <div class="clearfix"></div>
                      <span class="fields_design col-md-6">
                        <select ng-model="ChannelUserPort" id="sentToDist">
                          <option>Select</option>
                          <option value="secondchannel+user1+7051"> Bob </option>
                        </select>
                      </span> 
                      <span class="fields_design col-md-6">
                          <input id="querySubmit"  type="submit" value="Query" class="submit_btn_cmn" ng-click="queryAllRecord_1(ChannelUserPort)"/>
                      </span>
                  <div class="clearfix"></div>
                  <table width="100%">
                    <tbody>
                      <tr>
                        <th>Catch ID</th>
                        <th>Catch Timestamp</th>
                        <th>Distributor</th>
                        <th>Status</th>
                        <th>Vessel</th>
                        <th>Catch location (Longitude, Latitude)</th>
                        <th>Action</th>
                      </tr>
                      <tr ng-repeat="query_record in all_record_Alice" ng-if="query_record.distributor.shipmentstatus==' '">
                        <td>{{query_record.Key}}</td>
                        <td>{{query_record.timestamp}}</td>
                        <td>{{query_record.distributor.DistributorName}}</td>
                        <td>{{query_record.status}}</td>
                        <td>{{query_record.vessel}}</td>
                        <td>{{query_record.location}}</td>
                        <td>
                          <input id="prodId" name="prodId" type="hidden" value="">
                          <input ng-show="query_record.distributor.shipmentstatus==' '" type="checkbox" ng-model="query_record.selected" ng-true-value="'Y'" ng-false-value="'N'">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <div class="clearfix"></div>
                  <div class="submit_block">
                    <input class="submit_btn_cmn" id="sentItem" type="submit" value="Send" ng-click="sentItem({'data':all_record_Alice,'channel':'secondchannel','sendTo':'Distributor','user':'user1'})" onclick="" />
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="AlicetabSecond-3">
                  <div class="second_channel_info">Query all the catch IDs with status</div>
                  <div class="clearfix"></div>
                  <span class="fields_design col-md-6">
                          <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord()"/>
                          </span>
                  <div class="clearfix"></div>
                  <table width="100%" ng-table="tableParams">
                    <tbody>
                      <tr>
                        <th>Catch ID</th>
                        <th>Catch Timestamp</th>
                        <th>Distributor</th>
                        <th>Status</th>
                        <th>Vessel</th>
                        <th>Catch location (Longitude, Latitude)</th>
                        <th>Shipment ID</th>
                        <th>Shipment sent time</th>
                        <th>Shipment received time</th>
                        <th>Shipment status</th>
                        <th>QR code</th>
                      </tr>
                      <tr ng-repeat="record in $data">
                        <td>{{record.Key}} </td>
                        <td>{{record.timestamp}}</td>
                        <td>{{record.distributor.DistributorName}}</td>
                        <td>{{record.status}}</td>
                        <td>{{record.vessel}}</td>
                        <td>{{record.location}}</td>
                        <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record.distributor.shipmentid)">{{record.distributor.shipmentid}}</a>
                          <span ng-show="record.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                          <span ng-show="record.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                        </td>
                        <td>{{record.distributor.ShipmentSentTimestamp}}</td>
                        <td>{{record.distributor.ShipmentReceiveTimestamp}}</td>
                        <td>
                          <span ng-if="record.distributor.shipmentstatus!=' '" class="badge badge-success">{{record.distributor.shipmentstatus}}</span>
                          <span ng-if="record.distributor.shipmentstatus==' '">{{record.distributor.shipmentstatus}}</span>
                        </td>
                        <td><!-- Button trigger modal -->
                          <button type="button" class="btn" id="{{record.Key}}" data-toggle="modal" onclick="generateQRCode(this.id);" data-target="#exampleModalCenter"><i class="fas fa-qrcode"></i> </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>
          <!--Supplier ends here -->


          <!--Distributor-1 start here-->
          <div class="second_channel_right_content_block col-md-9 tabcontent" id="secondchannel_distributor">
              <h2>SECOND CHANNEL</h2>
              <div role="tabpanel">
                <ul class="nav nav-tabs second_channel_nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#BobtabSecond-2" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
                  <li role="presentation"><a href="#BobtabSecond-1" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
                  <li role="presentation"><a href="#BobtabSecond-3" data-toggle="tab" role="tab" aria-controls="tab1">Sent shipment</a></li>
                  
                </ul>
                <div id="tabContent1" class="tab-content">
                  <div role="tabpanel" class="tab-pane fade" id="BobtabSecond-1">
                    <div class="second_channel_info">Receive the shipment</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                            <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipmentForDistributor('secondchannel+user3+9051')"/>
                            </span>
                    <div class="clearfix"></div>
                    <table width="100%">
                      <tbody>
                        <tr>
                          <th>Shipment ID</th>
                          <th>Supplier</th>
                          <th>Status</th>
                          <th>Shipment sent time</th>
                          <th>Shipment details</th>
                          <th>Action</th>
                        </tr>
                        <tr ng-repeat="query_record_receive in sent_shipment_Bob" ng-if="query_record_receive.distributor.shipmentstatus=='Sent'">
                          <td>{{query_record_receive.distributor.shipmentid}}</td>
                          <td>{{query_record_receive.distributor.suppliername}}</td>
                          <td>{{query_record_receive.status}}</td>
                          <td>{{query_record_receive.distributor.ShipmentSentTimestamp}}</td>
                          <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#BobModal"
                            /></td>
                          <td>
                            <input ng-if="query_record_receive.distributor.shipmentstatus=='Sent' && query_record_receive.status=='New'" id="receiveItem" type="submit"
                              value="Received" class="default btn btn-outline-primary" ng-hide="hiddenBobReceive" ng-class="{fade: startFadeBobReceive}"
                              ng-click="receiveShipmentBob(shipment_tuna_Bob)" onclick="">
                              <input id="confirmShipmentBob" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenBobConfirm"
                                ng-class="{fade: startFadeBobConfirm}" ng-click="changeStatusBob(shipment_tuna_Bob)"
                                onclick="">
                                <span ng-if="query_record.distributor.shipmentstatus=='Delivered' && query_record.status=='Fresh'" class="badge badge-success">Confirmed success </span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <input id="receiveShipmentBob" value="firstchannel+user2+8051+8053" hidden>
                    <div class="clearfix"></div>
                    <!--start modal of list  tuna for bob -->
                    <div class="modal" id="BobModal">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <!-- Modal Header -->
                          <div class="modal-header">
                            <h4 class="modal-title">Shipment details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
                          <!-- Modal body -->
                          <div class="modal-body">
                            <table id="tuna_shipment_record_Bob" class="table table-striped table-bordered" style="width:100%" align="center">
                              <thead>
                                <tr>
                                  <th>Catch ID</th>
                                  <th>Catch Timestamp</th>
                                  <th>Supplier</th>
                                  <th>Status</th>
                                  <th>Vessel</th>
                                  <th>Catch Location <br>(Longitude, Latitude)</th>
                                  <th>Price</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="tuna_shipment_record_Bob in shipment_tuna_Bob">
                                  <!-- ng-if="tuna_shipment_record_Bob.shipmentstatus=='Sent'"> -->
                                  <td>{{tuna_shipment_record_Bob.Key}}</td>
                                  <td>{{tuna_shipment_record_Bob.timestamp}}</td>
                                  <td>{{tuna_shipment_record_Bob.Supplier}}</td>
                                  <td>{{tuna_shipment_record_Bob.status}}</td>
                                  <td>{{tuna_shipment_record_Bob.vessel}}</td>
                                  <td>{{tuna_shipment_record_Bob.location}}</td>
                                  <td>{{tuna_shipment_record_Bob.price}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <!-- Modal footer -->
                          <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                          </div>
                        </div>green
                      </div>
                    </div>
                    <!-- END modal list of tuna for bob -->
                  </div>
          
                  <div role="tabpanel" class="tab-pane fade in active" id="BobtabSecond-2">
                    <div class="second_channel_info">Query all the catch IDs with shipment status</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                            <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('secondchannel+user3+9051')"/>
                            </span>
                    <div class="clearfix"></div>
                    <table width="100%" ng-table="tableParamsBob">
                     
                        <tr>
                          <th>Catch ID</th>
                          <th>Catch Timestamp</th>
                          <th>Supplier</th>
                          <th>Status</th>
                          <th>Vessel</th> 
                          <th>Catch location (Longitude, Latitude)</th>
                          <th>Shipment ID</th>
                          <th>Shipment sent time</th>
                          <th>Shipment received time</th>
                          <th>Shipment status</th>
                        </tr>
                        <tbody ng-repeat="record_bob in $data">
                        <tr>
                          <td rowspan="2">{{record_bob.Key}}</td>
                          <td rowspan="2">{{record_bob.timestamp}}</td>
                          <td rowspan="2">{{record_bob.Supplier}}</td>
                          <td rowspan="2">{{record_bob.status}}</td>
                          <td rowspan="2">{{record_bob.vessel}}</td>
                          <td rowspan="2">{{record_bob.location}}</td>
                          <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record_bob.distributor.shipmentid)">{{record_bob.distributor.shipmentid}}</a></td>
                          <td>{{record_bob.distributor.ShipmentSentTimestamp}}</td>
                          <td>{{record_bob.distributor.ShipmentReceiveTimestamp}}</td>
                          <td>
                            <span ng-show="record_bob.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="record_bob.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="record_bob.status=='Fresh'" class="badge badge-success">Received </span>
                            <span ng-if="record_bob.distributor.shipmentstatus=='Sent' && record_bob.status=='New'" class="badge badge-info">Shipment in transit</span>
                          </td>
                        </tr>
                        <tr>
                            <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record_bob.retailer.shipmentid)">{{record_bob.retailer.shipmentid}}</a></td> 
                            <td>{{record_bob.retailer.ShipmentSentTimestamp}}</td>
                            <td>{{record_bob.retailer.ShipmentReceiveTimestamp}}</td>
                            <td><span ng-show="record_bob.retailer.FoodStatus=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_bob.retailer.FoodStatus=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                              <span ng-show="record_bob.retailer.shipmentstatus=='Delivered'" class="badge badge-success">Received </span>
                              <span ng-if="record_bob.retailer.shipmentstatus=='Sent' && record_bob.status=='Fresh'" class="badge badge-info">Shipment in transit</span>
                            </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="clearfix"></div>
                  </div>

                  <div role="tabpanel" class="tab-pane fade" id="BobtabSecond-3">
                      <div class="info">Send the shipment</div>
                      <span class="fields_design col-md-6">
                          <label>Please select name of distributor</label>
                          </span>
                      <div class="clearfix"></div>
                      <span class="fields_design col-md-6">
                          <select ng-model="ChannelUserPort" id="sentToRetailer">
                              <option>Select</option>
                              <option selected value="secondchannel+user3+9051"> Olivia </option>
                              <!-- <option value="secondchannel+user1+7051"> Bob </option> -->
                          </select>
                          </span> <span class="fields_design col-md-6">
                          <input id="querySubmit"  type="submit" value="Query" class="submit_btn_cmn" ng-click="queryAllRecord_1(ChannelUserPort)"/>
                          </span>
                      <div class="clearfix"></div>
                      <table width="100%" ng-table="tableParamsBob">
                          <tbody>
                          <tr>
                              <th>Catch ID</th>
                              <th>Catch Timestamp</th>
                              <th>Supplier</th>
                              <th>Distributor</th>
                              <th>Status</th>
                              <th>Vessel</th>
                              <th>Catch location (Longitude, Latitude)</th>
                              <th>Action</th>
                          </tr>
                          <tr ng-repeat="query_record in all_record_Bob" ng-if="query_record.distributor.shipmentstatus=='Delivered' && query_record.retailer.shipmentstatus==' '">
                              <td>{{query_record.Key}}</td>
                              <td>{{query_record.timestamp}}</td>
                              <td>{{query_record.distributor.suppliername}}</td>
                              <td>{{query_record.distributor.DistributorName}}</td>
                              <td>{{query_record.status}}</td>
                              <td>{{query_record.vessel}}</td>
                              <td>{{query_record.location}}</td>
                              <td>
                              <input id="prodId" name="prodId" type="hidden" value="">
                              <span ng-show="query_record.retailer.shipmentstatus=='Sent'" class="badge badge-info">Sent</span>
                              <input ng-show="query_record.distributor.shipmentstatus=='Delivered' && query_record.retailer.shipmentstatus==' '" type="checkbox" ng-model="query_record.selected" ng-true-value="'Y'" ng-false-value="'N'">
                              </td>
                          </tr>
                          </tbody>
                      </table>
                      <div class="clearfix"></div>
                      <div class="submit_block">
                          <input class="submit_btn_cmn" id="sentItem" type="submit" value="Send" ng-click="sentItem({'data':all_record_Bob,'channel':'secondchannel','sendTo':'Retailer','user':'user3'})" onclick="" />
                      </div>
                  </div>

                </div>
              </div>
          </div>
          <!--Distributor-1 ends here-->


          <!--Distributor-2 start here-->
          <div class="second_channel_right_content_block col-md-9 tabcontent" id="secondchannel_retailer">
            <h2>SECOND CHANNEL</h2>
            <div role="tabpanel">
              <ul class="nav nav-tabs second_channel_nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#OliviatabSecond-1" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
                <li role="presentation"><a href="#OliviatabSecond-2" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
              </ul>
              <div id="tabContent1" class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="OliviatabSecond-1">
                    <div class="second_channel_info">Receive the shipment</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                            <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipmentForRetailer('secondchannel+user5+11051')"/>
                            </span>
                    <div class="clearfix"></div>
                    <table width="100%">
                      <tbody>
                        <tr>
                          <th>Shipment ID</th>
                          <th>Distributor</th>
                          <th>Status</th>
                          <th>Shipment sent time</th>
                          <th>Shipment details</th>
                          <th>Action</th>
                        </tr>
                        <tr ng-repeat="olivia_query_record_receive in sent_shipment_Olivia" ng-if="olivia_query_record_receive.retailer.shipmentstatus=='Sent'">
                          <td>{{olivia_query_record_receive.retailer.shipmentid}}</td>
                          <td>{{olivia_query_record_receive.retailer.DistributorName}}</td>
                          <td>{{olivia_query_record_receive.status}}</td>
                          <td>{{olivia_query_record_receive.retailer.ShipmentSentTimestamp}}</td>
                          <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#OliviaModal"
                            /></td>
                          <td>
                            <input ng-if="olivia_query_record_receive.retailer.shipmentstatus=='Sent' && olivia_query_record_receive.status=='Fresh'" id="receiveItem"
                              type="submit" value="Received" class="default btn btn-outline-primary" ng-hide="hiddenMiriamOlivia"
                              ng-class="{fade: startFadeOliviaReceive}" ng-click="receiveShipmentOlivia(shipment_tuna_Olivia)" onclick="stopIOT()">
              
                              <input id="confirmShipmentOlivia" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenOliviaConfirm"
                                ng-class="{fade: startFadeOliviaConfirm}" ng-click="changeStatusOlivia(shipment_tuna_Olivia)" onclick="stopIOT()">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="clearfix"></div>
                    <input id="receiveShipmentOlivia" value="secondchannel+user3+9051+9053" hidden>
                    <!--start modal of list  tuna for Olivia -->
                    <div class="modal" id="OliviaModal">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
              
                          <!-- Modal Header -->
                          <div class="modal-header">
                            <h4 class="modal-title">Shipment details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
              
                          <!-- Modal body -->
              
                          <div class="modal-body">
                            <table id="tuna_shipment_record_Miriam" class="table table-striped table-bordered" style="width:100%" align="center">
                              <thead>
                                <tr>
                                  <th>Catch ID</th>
                                  <th>Catch Timestamp</th>
                                  <th>Distributor</th>
                                  <th>Status</th>
                                  <th>Vessel</th>
                                  <th>Catch Location <br>(Longitude, Latitude)</th>
                                  <th>Price</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="tuna_shipment_record_Olivia in shipment_tuna_Olivia" ng-if="tuna_shipment_record_Olivia.retailer.shipmentstatus=='Sent'">
                                  <td>{{tuna_shipment_record_Olivia.Key}}</td>
                                  <td>{{tuna_shipment_record_Olivia.timestamp}}</td>
                                  <td>{{tuna_shipment_record_Olivia.retailer.DistributorName}}</td>
                                  <td>{{tuna_shipment_record_Olivia.status}}</td>
                                  <td>{{tuna_shipment_record_Olivia.vessel}}</td>
                                  <td>{{tuna_shipment_record_Olivia.location}}</td>
                                  <td>{{tuna_shipment_record_Olivia.price}}</td>
                                </tr>
                              </tbody>
              
                            </table>
                          </div>
              
                          <!-- Modal footer -->
                          <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- END modal list of tuna for miriam -->
              
                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="OliviatabSecond-2">
                    <div class="second_channel_info">Query all the catch IDs with shipment status</div>
                    <div class="clearfix"></div>
                    <span class="fields_design col-md-6">
                            <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('secondchannel+user5+11051')" />
                            </span>
                    <div class="clearfix"></div>
                    <table width="100%" ng-table="tableParamsOlivia">
                      <tbody>
                        <tr>
                          <th>Catch ID</th>
                          <th>Catch Timestamp</th>
                          <th>Distributor</th>
                          <th>Status</th>
                          <th>Vessel</th>
                          <th>Catch location (Longitude, Latitude)</th>
                          <th>Shipment ID</th>
                          <th>Shipment sent time</th>
                          <th>Shipment received time</th>
                          <th>Shipment status</th>
                          <th>QR Code</th>
                        </tr>
                        <tr ng-repeat="record_olivia in $data" ng-if="record_olivia.retailer.shipmentstatus!=' '">
                          <td>{{record_olivia.Key}}</td>
                          <td>{{record_olivia.timestamp}}</td>
                          <td>{{record_olivia.retailer.DistributorName}}</td>
                          <td>{{record_olivia.status}}</td>
                          <td>{{record_olivia.vessel}}</td>
                          <td>{{record_olivia.location}}</td>
                          <td><a href="" data-toggle="modal" data-target="#exampleModalCenterForGraph" ng-click="getGraphData(record_olivia.retailer.shipmentid)">{{record_olivia.retailer.shipmentid}}</a></td>
                          <td>{{record_olivia.retailer.ShipmentSentTimestamp}}</td>
                          <td>{{record_olivia.retailer.ShipmentReceiveTimestamp}}</td>
                          <td>
                            <span ng-show="record_olivia.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="record_olivia.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="record_olivia.retailer.FoodStatus=='Fresh' && record_olivia.retailer.shipmentstatus=='Delivered'" class="badge badge-success">Received </span>
                            <span ng-show="record_olivia.retailer.shipmentstatus=='Sent' && record_olivia.status=='Fresh'" class="badge badge-info">Shipment in transit</span>
                            
                          </td>
                          <td><!-- Button trigger modal -->
                            <button type="button" class="btn" id="{{record_olivia.Key}}" data-toggle="modal" onclick="generateQRCode(this.id);" data-target="#exampleModalCenter"><i class="fas fa-qrcode"></i> </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>

                    <div class="clearfix"></div>
                  </div>
              </div>
            </div>
          </div>
          <!--Distributor-2 Ends here-->
        </section>
        <div class="clearfix"></div>
        <!-- Content Section ends here-->
      </div>
    </div>
    <!--secondchannel end here-->

  </div>


  <!-- Footer Section starts here-->
  <footer class="footer">© copyright 2019</footer>
  <!-- Footer Section ends here-->


  <!-- common model for QR Code generator -->
  <!-- Modal Start -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Please scan QR code</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <div id="qrcode" style="height:247px;margin-left:145px;"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
  </div>
  <!-- Modal END -->


  <!-- common model for QR Code generator -->
  <!-- Modal Start -->
  <div class="modal fade" id="exampleModalCenterForGraph" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="width: 50%;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div style="width: 100%; height:100%" ><canvas id="canvas"></canvas></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>
<!-- Modal END -->


  <script src="./SupplychainUI/js/bootstrap.js"></script>
  <script src="./bootstrap-notify.js"></script>
  <script src="./sensorIOT/js/fastclick.js"></script>
  <script type="text/javascript" src="./app.js"></script>
  <script src="./chartjs-plugin-annotation.js"/>

  </script>
  <script type="text/javascript" src="./sensorIOT/js/mqttws31.js"></script>
  <script src="./sensorIOT/js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>

  <script>


        //show QR code
        var qrcode = new QRCode("qrcode");

        function makeCode (data) {		
          var elText = data.toString();
          
          if (!elText) {
            alert("Input a text");
            return;
          }
          
          console.log("Generating QR code for "+elText);
          qrcode.makeCode(elText);
          
        }

        function generateQRCode(data){
          makeCode(data);
        } 



        function openCity(evt, cityName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");

          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }

          tablinks = document.getElementsByClassName("tablinks");

          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace("active_item", "");
          }

          document.getElementById(cityName).style.display = "block";
          evt.currentTarget.className += " active_item";
        }

        document.getElementById("firstchannel_defaultOpen").click();


        $(function () {
          var socket = io.connect()

          socket.on('chat_message', function (shipmentid, state, temp) {
            if (state == 'Waste') {
              $.notify({
                icon: "fas fa-exclamation-triangle",
                title: "<strong>Alert !!</strong> ",
                message: 'Shipment:' + shipmentid + ' crossed the threshold temperature, last temp. recorded:' + temp
              }, {
                  type: 'danger',
                  offset: {
                    x: 0,
                    y: 233
                  }
                });

              // alert('your shipment '+shipmentid+'crossed the threshold temperature, last temp. recorded:'+temp); 
            } else {
              $.notify({

                icon: "fas fa-exclamation-triangle",
                title: '<strong> Success!! </strong>',
                message: 'shipment:' + shipmentid + ' reached to destination sucessfully'
              }, {
                  type: 'success',
                  offset: {
                    x: 0,
                    y: 233
                  }
                });
              //   alert('your shipment '+shipmentid+' reached to destination sucessfully,last temp. recorded:'+temp); 
            }
          });
        });

  </script>
</body>

</html>
