<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>BLOCKCHAIN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
<script src="https://unpkg.com/ng-table@3.0.1/bundles/ng-table.min.js"></script>
<script src="./SupplychainUI/js/manage_html_view.js"></script>
<link href="./SupplychainUI/css/bootstrap-3.3.7.css" rel="stylesheet" type="text/css">
<link href="./SupplychainUI/css/style.css" rel="stylesheet">
<link rel="stylesheet"; href="https://unpkg.com/ng-table@3.0.1/bundles/ng-table.min.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<body ng-app="application" ng-controller="appController">

<!--loader icon -->
<div id="cover-spin"></div>

<div class="container-fluid"> 
  
  <!-- Header Section starts here-->
  <header class="header_bg">
    <div class="header_left"></div>
    <div class="header_right"></div>
    <div class="container">
      <div class="logo_pharma"> <a href="#"><img src="images/logo.png" alt="logo"/></a> </div>
      <div class="banner_text_right"> Blockchain for Business<br>
        <b>WITH IBM BLOCKCHAIN</b> </div>
    </div>
  </header>
  <!-- Header Section ends here-->
 
      <div id="index_view">
	        <!-- index_view Section ends here-->
		<div class="student_id_banner">
		  	<h1>Digital Identity Onboarding</h1>
		  	<h2>
		  		<b>The creation of digital identity</b> -  a unique identifier for you that verifies that you are who you<br>
		  		<b>say you are</b> -  seems to be the natural next step to facilitate societyâ€™s desire to digitize
		  	</h2>
			<div class="button_set">
				<a href="#" class="agent_btn cms_student_btn" id="alice_login_html">Alice</a>
				<a href="#" class="admin_btn cms_student_btn">Mirium</a>
				<a href="#" class="agent_btn cms_student_btn">Bob</a>
			</div>
		</div>
		<!-- index_view Section ends here-->
     </div> 
 <div id="alice_html">
  <div class="wrapper">   
  <div class="container">
    <div class="signout">
        <a href="#" id="sign_out"><img src="./SupplychainUI/images/sign_out_btn.png" alt="" title="sign out"></a>
    </div>
  </div>
 
    <!-- Content Section starts here-->
    <section class="content_area">
      <div class="left_submenu col-md-2">
        <ul>
          <li href="#supplier" onclick="openCity(event, 'supplier')"  id="defaultOpen" class="tablinks"><a>Alice (Supplier)</a></li>
          <li href="#distributor-1" onclick="openCity(event, 'distributor-1')" class="tablinks" ><a>Miriam (Distributor)</a></li>
          <li href="#distributor-2" onclick="openCity(event, 'distributor-2')" class="tablinks"><a>Bob (Distributor)</a></li>
        </ul>
      </div>


      <!--Supplier start here-->
      <div class="right_content_block col-md-9 tabcontent" id="supplier">
          <h2>Space for header text</h2>
          <div role="tabpanel">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#sup-home1" data-toggle="tab" role="tab" aria-controls="tab1">Create new catch record</a></li>
              <li role="presentation"><a href="#sup-paneTwo1" data-toggle="tab" role="tab" aria-controls="tab2">Send shipment</a></li>
              <li role="presentation"><a href="#sup-paneTwo2" data-toggle="tab" role="tab" aria-controls="tab3">Dashboard</a></li>
            </ul>
            <div id="tabContent1" class="tab-content">
              <div role="tabpanel" class="tab-pane fade in active" id="sup-home1">
                <div class="info" >Please enter the following details for the new catch record</div>
                <span class="fields_design col-md-6">
                <label>Enter price</label>
                <input type="text" placeholder="EX:11$" ng-model="tuna.price" ng-required="true"/>
                </span> <span class="fields_design col-md-6">
                <label>Enter name of vessel</label>
                <input type="text" placeholder="EX:0239L" ng-model="tuna.vessel" ng-required="true"/>
                </span> <span class="fields_design col-md-6">
                <label>Enter longitude</label>
                <input class="nonactive" type="text" value="13.052313"/>
                </span> <span class="fields_design col-md-6">
                <label>Enter latitude</label>
                <input class="nonactive" type="text" value="77.624934"/>
                </span> <span class="fields_design col-md-6">
                <label>Please select name of distributor</label>
                <select ng-model="tuna.holder">
                  <option>Select</option>
 		  <option selected value="firstchannel+Miriam"> Miriam </option>
		  <option value="secondchannel+Bob"> Bob </option>                 
                </select>
                </span>
                <div class="clearfix"></div>
                <div class="submit_block">
		  <input id="createSubmit" type="submit" value="Create" class="submit_btn_cmn" ng-click="addRecord(tuna)">
                </div>
              </div>
              <div role="tabpanel" class="tab-pane fade" id="sup-paneTwo1">
                <div class="info" >Send the shipment</div>
                <span class="fields_design col-md-6">
                <label>Please select name of distributor</label>
                </span>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <select ng-model="ChannelUserPort" id="sentToDist">
                  <option>Select</option>
                  <option selected value="firstchannel+user1+7051"> Miriam </option>
		  <option value="secondchannel+user1+7051"> Bob </option>
                </select>
                </span> <span class="fields_design col-md-6">
                <input id="querySubmit"  type="submit" value="Query" class="submit_btn_cmn" ng-click="queryAllRecord_1(ChannelUserPort)"/>
                </span>
                <div class="clearfix"></div>
                <table width="100%">
                  <tbody>
                    <tr>
                      <th>Catch ID</th>
                      <th>Catch Timestamp</th>
                      <th>Distributor</th>
                      <th>Status</th>
                      <th>Vessel</th>
                      <th>Catch location (Longitude, Latitude)</th>
                      <th>Action</th>
                    </tr>
                    <tr ng-repeat="query_record in all_record_Alice" ng-if="query_record.shipmentstatus==''">
		      <td>{{query_record.Key}}</td>
                      <td>{{query_record.timestamp}}</td>
                      <td>{{query_record.distributor}}</td>
                      <td>{{query_record.status}}</td>
                      <td>{{query_record.vessel}}</td>
                      <td>{{query_record.location}}</td>
		      <td>
                         <input id="prodId" name="prodId" type="hidden" value="">
                         <span ng-show="query_record.shipmentstatus=='Sent'" class="badge badge-info">Sent({{query_record.shipmentid}})</span>
		         <input ng-show="query_record.shipmentstatus==''" type="checkbox" ng-model="query_record.selected" ng-true-value="'Y'" ng-false-value="'N'">
		      </td>
                    </tr>
                  </tbody>
                </table>
                <div class="clearfix"></div>
                <div class="submit_block">
                  <input class="submit_btn_cmn" id="sentItem" type="submit" value="Send"  ng-click="sentItem(all_record_Alice)" onclick=""/>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane fade" id="sup-paneTwo2">
                <div class="info" >Query all the catch IDs with status</div>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord()"/>
                </span>
                <div class="clearfix"></div>
                <table width="100%" ng-table="tableParams">
                  <tbody>
                    <tr>
                      <th>Catch ID</th>
                      <th>Catch Timestamp</th>
                      <th>Distributor</th>
                      <th>Status</th>
                      <th>Vessel</th>
                      <th>Catch location (Longitude, Latitude)</th>
                      <th>Shipment ID</th>
                      <th>Shipment sent time</th>
                      <th>Shipment received time</th>
                      <th>Shipment status</th>
                    </tr>
                    <tr ng-repeat="record in $data">
		      <td>{{record.Key}} </td>
                      <td>{{record.timestamp}}</td>
                      <td>{{record.distributor}}</td>
                      <td>{{record.status}}</td>
                      <td>{{record.vessel}}</td>
                      <td>{{record.location}}</td>
                      <td>{{record.shipmentid}}
			  <span ng-show="record.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
			  <span ng-show="record.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
		      </td>
		      <td>{{record.ShipmentSentTimestamp}}</td>
 		      <td>{{record.ShipmentReceiveTimestamp}}</td>
		      <td><span class="badge badge-success">{{record.shipmentstatus}}</span></td>
                    </tr>
                  </tbody>
                </table>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
      <!--Supplier ends here -->


      <!--Distributor-1 start here-->
      <div class="right_content_block col-md-9 tabcontent" id="distributor-1">
          <h2>Space for header text</h2>
          <div role="tabpanel">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#dist-home2" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
              <li role="presentation"><a href="#dist-paneTwo2" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
            </ul>
            <div id="tabContent1" class="tab-content">
              <div role="tabpanel" class="tab-pane fade in active" id="dist-home2">
                <div class="info" >Receive the shipment</div>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipment('firstchannel+user2+8051')"/>
                </span>
                <div class="clearfix"></div>
                <table width="100%">
                  <tbody>
                    <tr>
                      <th>Shipment ID</th>
                      <th>Supplier</th>
                      <th>Status</th>
                      <th>Shipment sent time</th>
                      <th>Shipment details</th>
                      <th>Action</th>
                    </tr>
                    <tr ng-repeat="query_record_receive in sent_shipment_Miriam">
		      <td>{{query_record_receive.shipmentid}}</td>
                      <td>{{query_record_receive.Supplier}}</td>
                      <td>{{query_record_receive.status}}</td>
                      <td>{{query_record_receive.ShipmentSentTimestamp}}</td>
		      <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#MiriamModal"/></td>
		      <td>
			  <input ng-if="query_record_receive.shipmentstatus=='Sent' && query_record_receive.status=='New'" id="receiveItem" type="submit"
				    value="Received" class="default btn btn-outline-primary" ng-hide="hiddenMiriamReceive" ng-class="{fade: startFadeMiriamReceive}"
				    ng-click="receiveShipmentMiriam(shipment_tuna_Miriam)" onclick="">
			  <input id="confirmShipmentMiriam" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenMiriamConfirm"
				    ng-class="{fade: startFadeMiriamConfirm}" ng-click="changeStatusMiriam(shipment_tuna_Miriam)" onclick="">
			  <span ng-if="query_record.shipmentstatus=='Delivered' && query_record.status=='Fresh'" class="badge badge-success">Confirmed success </span>
		      </td>
                    </tr>
                  </tbody>
                </table>
		<input id="receiveShipmentMiriam" value="firstchannel+user2+8051+8053" hidden>
                <div class="clearfix"></div>
                   <!--start modal of list  tuna for miriam -->
                    <div class="modal" id="MiriamModal">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title">Shipment details</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                <!-- Modal body -->
                                <div class="modal-body">
                                    <table id="tuna_shipment_record_Miriam" class="table table-striped table-bordered"
                                        style="width:100%" align="center">
                                        <thead>
                                            <tr>
                                                <th>Catch ID</th>
                                                <th>Catch Timestamp</th>
                                                <th>Supplier</th>
                                                <th>Status</th>
                                                <th>Vessel</th>
                                                <th>Catch Location <br>(Longitude, Latitude)</th>
                                                <th>Price</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="tuna_shipment_record_Miriam in shipment_tuna_Miriam">
                                                <!-- ng-if="tuna_shipment_record_Miriam.shipmentstatus=='Sent'"> -->
                                                <td>{{tuna_shipment_record_Miriam.Key}}</td>
                                                <td>{{tuna_shipment_record_Miriam.timestamp}}</td>
                                                <td>{{tuna_shipment_record_Miriam.Supplier}}</td>
                                                <td>{{tuna_shipment_record_Miriam.status}}</td>
                                                <td>{{tuna_shipment_record_Miriam.vessel}}</td>
                                                <td>{{tuna_shipment_record_Miriam.location}}</td>
                                                <td>{{tuna_shipment_record_Miriam.price}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END modal list of tuna for miriam -->
              </div>


              <div role="tabpanel" class="tab-pane fade" id="dist-paneTwo2">
                <div class="info" >Query all the catch IDs with shipment status</div>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('firstchannel+user2+8051')"/>
                </span>
                <div class="clearfix"></div>
                <table width="100%" ng-table="tableParamsMiriam">
                  <tbody>
                    <tr>
                      <th>Catch ID</th>
                      <th>Catch Timestamp</th>
                      <th>Supplier</th>
                      <th>Status</th>
                      <th>Vessel</th>
                      <th>Catch location (Longitude, Latitude)</th>
                      <th>Shipment ID</th>
                      <th>Shipment sent time</th>
                      <th>Shipment received time</th>
                      <th>Shipment status</th>
                    </tr>
                    <tr ng-repeat="record_1 in $data">
                        <td>{{record_1.Key}}</td>
                        <td>{{record_1.timestamp}}</td>
                        <td>{{record_1.Supplier}}</td>
                        <td>{{record_1.status}}</td>
                        <td>{{record_1.vessel}}</td>
                        <td>{{record_1.location}}</td>
                        <td>{{record_1.shipmentid}}</td>
                        <td>{{record_1.ShipmentSentTimestamp}}</td>
                        <td>{{record_1.ShipmentReceiveTimestamp}}</td>
                        <td>
                            <span ng-show="record_1.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
  	                    <span ng-show="record_1.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>	
                            <span ng-show="record_1.status=='Fresh'" class="badge badge-success">Received </span>
                            <span ng-if="record_1.shipmentstatus=='Sent' && record_1.status=='New'" class="badge badge-info">Shipment in transit</span>
                        </td>
                    </tr>
                  </tbody>
                </table>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
      </div>
      <!--Distributor-1 ends here-->


      <!--Distributor-2 start here-->
      <div class="right_content_block col-md-9 tabcontent" id="distributor-2">
          <h2>Space for header text</h2>
          <div role="tabpanel">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#dist-home3" data-toggle="tab" role="tab" aria-controls="tab1">Receive shipment</a></li>
              <li role="presentation"><a href="#dist-paneTwo3" data-toggle="tab" role="tab" aria-controls="tab2">Dashboard</a></li>
            </ul>
            <div id="tabContent1" class="tab-content">
              <div role="tabpanel" class="tab-pane fade in active" id="dist-home3">
                <div class="info" >Receive the shipment</div>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <input type="button" value="Refresh" class="submit_btn_cmn" ng-click="queryShipment('secondchannel+user3+9051')"/>
                </span>
                <div class="clearfix"></div>
                <table width="100%">
                  <tbody>
                    <tr>
                      <th>Shipment ID</th>
                      <th>Supplier</th>
                      <th>Status</th>
                      <th>Shipment sent time</th>
                      <th>Shipment details</th>
                      <th>Action</th>
                    </tr>
                    <tr ng-repeat="bob_query_record_receive in sent_shipment_Bob" ng-if="bob_query_record_receive.shipmentstatus=='Sent'" >
                      <td>{{bob_query_record_receive.shipmentid}}</td>
                      <td>{{bob_query_record_receive.Supplier}}</td>
                      <td>{{bob_query_record_receive.status}}</td>
                      <td>{{bob_query_record_receive.ShipmentSentTimestamp}}</td>
                      <td><button type="button" class="btn btn-primary fas fa-shipping-fast" data-toggle="modal" data-target="#BobModal" /></td>
                      <td>
				<input ng-if="bob_query_record_receive.shipmentstatus=='Sent' && bob_query_record_receive.status=='New'"
                                                id="receiveItem" type="submit" value="Received" class="default btn btn-outline-primary" ng-hide="hiddenMiriamBob" ng-class="{fade: startFadeBobReceive}"
                                                ng-click="receiveShipmentBob(shipment_tuna_Bob)" onclick="stopIOT()">
						
				<input id="confirmShipmentBob" type="submit" value="Confirm" class="default btn btn-outline-primary" ng-hide="hiddenBobConfirm" ng-class="{fade: startFadeBobConfirm}"
                                            ng-click="changeStatusBob(shipment_tuna_Bob)" onclick="stopIOT()">
		     </td>
                    </tr>
                  </tbody>
                </table>
                <div class="clearfix"></div>
		<input id="receiveShipmentBob" value="secondchannel+user3+9051+9053" hidden>
		<!--start modal of list  tuna for Bob -->
                            <div class="modal" id="BobModal">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">

                                        <!-- Modal Header -->
                                        <div class="modal-header">
                                            <h4 class="modal-title">Shipment details</h4>
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        </div>

                                        <!-- Modal body -->

                                        <div class="modal-body">
                                            <table id="tuna_shipment_record_Miriam" class="table table-striped table-bordered"
                                                style="width:100%" align="center">
                                                <thead>
                                                    <tr>
                                                        <th>Catch ID</th>
                                                        <th>Catch Timestamp</th>
                                                        <th>Supplier</th>
                                                        <th>Status</th>
                                                        <th>Vessel</th>
                                                        <th>Catch Location <br>(Longitude, Latitude)</th>
                                                        <th>Price</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="tuna_shipment_record_Bob in shipment_tuna_Bob" ng-if="tuna_shipment_record_Bob.shipmentstatus=='Sent'">
                                                        <td>{{tuna_shipment_record_Bob.Key}}</td>
                                                        <td>{{tuna_shipment_record_Bob.timestamp}}</td>
                                                        <td>{{tuna_shipment_record_Bob.Supplier}}</td>
                                                        <td>{{tuna_shipment_record_Bob.status}}</td>
                                                        <td>{{tuna_shipment_record_Bob.vessel}}</td>
                                                        <td>{{tuna_shipment_record_Bob.location}}</td>
                                                        <td>{{tuna_shipment_record_Bob.price}}</td>
                                                    </tr>
                                                </tbody>

                                            </table>
                                        </div>

                                        <!-- Modal footer -->
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END modal list of tuna for miriam -->

              </div>
              <div role="tabpanel" class="tab-pane fade" id="dist-paneTwo3">
                <div class="info" >Query all the catch IDs with shipment status</div>
                <div class="clearfix"></div>
                <span class="fields_design col-md-6">
                <input type="button" value="Query All" class="submit_btn_cmn" ng-click="queryAllRecord_1('secondchannel+user3+9051')" />
                </span>
                <div class="clearfix"></div>
                <table width="100%" ng-table="tableParamsBob">
                  <tbody>
                    <tr>
                      <th>Catch ID</th>
                      <th>Catch Timestamp</th>
                      <th>Supplier</th>
                      <th>Status</th>
                      <th>Vessel</th>
                      <th>Catch location (Longitude, Latitude)</th>
                      <th>Shipment ID</th>
                      <th>Shipment sent time</th>
                      <th>Shipment received time</th>
                      <th>Shipment status</th>
                    </tr>
                    <tr ng-repeat="record_1 in $data">
			<td>{{record_1.Key}}</td>
                        <td>{{record_1.timestamp}}</td>
                        <td>{{record_1.Supplier}}</td>
                        <td>{{record_1.status}}</td>
                        <td>{{record_1.vessel}}</td>
                        <td>{{record_1.location}}</td>
                        <td>{{record_1.shipmentid}}</td>
                        <td>{{record_1.ShipmentSentTimestamp}}</td>
                        <td>{{record_1.ShipmentReceiveTimestamp}}</td>
                        <td>
                            <span ng-show="record_1.status=='Waste'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-show="record_1.status=='Stale'" class="badge badge-danger">Crossed Threashold Temperature </span>
                            <span ng-if="record_1.status=='Fresh' && record_1.shipmentstatus == 'Delivered'" class="badge badge-success">Received </span>
                            <span ng-if="record_1.shipmentstatus=='Sent' && record_1.status=='New'" class="badge badge-info">Shipment in transit</span>
                        </td>
                    </tr>
                  </tbody>
                </table>
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
      <!--Distributor-2 Ends here-->


      <div class="clearfix"></div>
    </section>
    <!-- Content Section ends here--> 
    </div>  
  </div>
  
  <!-- Footer Section starts here-->
  <footer class="footer">Â©  copyright 2019</footer>
  <!-- Footer Section ends here--> 
  
</div>
<script src="./SupplychainUI/js/bootstrap.js"></script>
<script src="./bootstrap-notify.js"></script>	
<script src="./sensorIOT/js/fastclick.js"></script>
<script type="text/javascript" src="./app.js"> </script>
<script type="text/javascript" src="./sensorIOT/js/mqttws31.js"></script>
<script src="./sensorIOT/js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>

<script>

      function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");

        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        tablinks = document.getElementsByClassName("tablinks");

        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace("active_item", "");
        }

        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active_item";
      }

      document.getElementById("defaultOpen").click();


$(function() {
    var socket = io.connect()

    socket.on('chat_message', function(shipmentid, state, temp) {
        if (state == 'Waste') {
            $.notify({
                icon: "fas fa-exclamation-triangle",
                title: "<strong>Alert !!</strong> ",
                message: 'Shipment:' + shipmentid + ' crossed the threshold temperature, last temp. recorded:' + temp
            }, {
                type: 'danger',
                offset: {
                    x: 0,
                    y: 233
                }
            });

            // alert('your shipment '+shipmentid+'crossed the threshold temperature, last temp. recorded:'+temp); 
        } else {
            $.notify({

                icon: "fas fa-exclamation-triangle",
                title: '<strong> Success!! </strong>',
                message: 'shipment:' + shipmentid + ' reached to destination sucessfully'
            }, {
                type: 'success',
                offset: {
                    x: 0,
                    y: 233
                }
            });
            //   alert('your shipment '+shipmentid+' reached to destination sucessfully,last temp. recorded:'+temp); 
        }
    });
});

$(document).ready(function() {
    // <!--  $('#dtBasicExample').DataTable();
    //	 $('.dataTables_length').addClass('bs-select');	-->

});

function startReadIOTApp(queryRecordId, callback) {
    angular.element(document.getElementById('query_record')).scope().startReadingTempIOT(query_record);
    console.log('started reading temp');
    callback();
}

function sentItemfunction(queryRecordId, callback) {
    angular.element(document.getElementById('query_record')).scope().sentItem(query_record);
    console.log('updating item sent');
    callback();
}


function sentItem() {
    var queryRecordId = $('#prodId').val();
    console.log(queryRecordId);
    sentItemfunction(queryRecordId, function() {
        startReadIOTApp(queryRecordId, function(queryRecordId) {
            // printList(callback);
        });
    });
}

</script>
</body>
</html>
